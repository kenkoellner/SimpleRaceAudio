<html>

<style>
button {
    margin: 5px;
}
.optional { 
    font: italic;
}
.critical { 
    background-color: yellow;
}
</style>

Heats/Round-- 
<select id='heatselect'>
  <option  value="1">1</option>
  <option  value="2">2</option>
  <option  value="3">3</option>
  <option  value="4" selected>4</option>
  <option  value="5">5</option>
  <option  value="6">6</option>
  <option  value="7">7</option>
  <option  value="8">8</option>
</select>
&nbsp;Race
<select id='lenselect'>
  <option  value="0">2.0</option>
  <option  value="1">2.5</option>
</select>
minutes.
<hr/>


<button  onclick="doPrevNext(-1);">Previous</button>
<br/>
<button onclick="doPrevNext(1);">Next</button>

<hr/>

Round - <span id="currentround">1</span>
&nbsp;&nbsp;
Heat - <span id="currentheat">1</span>

<hr>

<audio id="player" type="audio/mpeg">THIS BROWSER DOES NOT SUPPORT AUDIO</audio>

<button onclick="playItRound('round','.mp3')">Round</button>
<br/>

<button  onclick="playItHeat('heat','.mp3', 0)">Heat</button>

<br/>
<button  onclick="playItHeat('heat','isup.mp3', 0)">Heat Is Up</button>

<br/>
<button  onclick="playItHeat('heat', 'spotters.mp3', 1)">Heat Spotters</button>

<br/>
<button  onclick="playIt('pilotthumbs.mp3')">Pilots Ready</button>

<br/>
<button  onclick="playIt('spotterthumbs.mp3')">Spotters Ready</button>

<br/>
<button  onclick="playIt('lessthanfive.mp3')">Starts in Five</button>

<br/>
<button  onclick="playItRace();">Start Race</button>

<br/>
<button  onclick="abort();">ABORT RACE!!!</button>



<script>

function doPrevNext  (direction) {
	var currentheat = document.getElementById("currentheat");
	var currentround = document.getElementById("currentround");
    var heat = Number(currentheat.innerHTML);
    var round = Number(currentround.innerHTML);
	var heatselect = document.getElementById("heatselect");
    var maxHeat = heatselect.selectedIndex + 1;
    direction = Number(direction);
    heat+=direction;
    if (heat > maxHeat) {
    	heat = 1;
    	round++;
    }
    if (heat < 1) {
    	heat = 1;
    	round--;
    }
    if (round < 1 || round > 8) {
    	round = 1;
    }
    currentheat.innerHTML = heat;
    currentround.innerHTML = round;
}

function playIt(clipName) {
  var player = document.getElementById("player");	
  player.onended = null;
  player.src = clipName;
  player.play();
}

function playItRace() {
  var clipName;
  var racelen = document.getElementById("lenselect").selectedIndex;	
  if (racelen == 0) {
    clipName = 'twominutecount.mp3';
  } else {
    clipName = 'twoandonehalfminutecount.mp3';
  }
  var player = document.getElementById("player");	
  player.src = clipName;
  player.onended = function () {
    doPrevNext(1);
  };
  player.play();
}
  
function playItRound(firstStr,secondStr) {
  var currentround = document.getElementById("currentround");	
  var round = currentround.innerHTML;
  var clipName = firstStr + round + secondStr;
  playIt(clipName);
}

function playItHeat(firstStr,secondStr,offset) {
  var currentheat = document.getElementById("currentheat");
  var heat = currentheat.innerHTML;
  var myHeat = Number(offset) + Number(heat);
  var heatselect = document.getElementById("heatselect");
  var maxHeat = heatselect.selectedIndex + 1;
  if (myHeat > maxHeat) {
	  myHeat = 1;
  }
  var clipName = firstStr + myHeat + secondStr;
  playIt(clipName);
}

function abort() {
  var player = document.getElementById("player");
  var ended = player.ended;
  player.pause();
  playIt('abort.mp3');
}


</script>
</html>